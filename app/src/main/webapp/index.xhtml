<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<ui:include src="/resources/templates/header.xhtml"/>

<h:body>

    <f:event type="preRenderView" listener="#{perfilUsuarioController.init()}"/>
    <f:event type="preRenderView" listener="#{timelineController.init()}"/>

    <h:form enctype="multipart/form-data">
        <h:panelGrid columns="1">
            <h:outputText value="#{perfilUsuarioController.nombrePersonal}"/>
            <h:outputText value="#{perfilUsuarioController.apellidoPersonal}"/>
            <h:outputText value="#{perfilUsuarioController.nickPersonal}"/>
            <h:outputText value="#{perfilUsuarioController.correoPersonal}"/>
            <h:outputText value="#{perfilUsuarioController.grupoPersonal}"/>
            <h:outputText value="#{perfilUsuarioController.webPersonal}"/>
            <h:outputText value="#{perfilUsuarioController.tipoMusicaPersonal}"/>
            <h:graphicImage value="data:image/jpeg;base64,#{perfilUsuarioController.imagenPersonal}"/>
            <p:commandButton value="Logout" id="logout" actionListener="#{loginController.logout}"
                             styleClass="ui-priority-primary"/>
        </h:panelGrid>

    </h:form>


    <h:form>
        <ui:repeat var="melom" value="#{timelineController.listaMeloms}">
            <h:panelGrid columns="6">

                <h:outputText value="#{melom.titulo}"/>
                <h:outputText value="#{melom.album}"/>
                <h:outputText value="#{melom.tipoMusica}"/>
                <h:outputText value="#{melom.comentarioMusico}"/>

                <audio controls="controls">
                    <source src="data:audio/mpeg3;base64,#{melom.cancion}" type="audio/mpeg"/>
                </audio>
                <h:graphicImage value="data:image/jpeg;base64,#{melom.imagenAlbum}" height="10%"/>
            </h:panelGrid>
        </ui:repeat>
    </h:form>

    <h:form>
        <ui:repeat var="nick" value="#{perfilUsuarioController.listaNicks}">
            <h:panelGrid columns="1">
                <h:commandLink value="#{nick}" actionListener="#{perfilUsuarioController.verPerfil(nick)}" />
            </h:panelGrid>
        </ui:repeat>
    </h:form>

</h:body>
</html>