<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ps="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:my="http://java.sun.com/jsf/composite/melomify">

<ui:include src="/resources/templates/navBar.xhtml"/>
<h:outputStylesheet library="css" name="modificacionUsuario.css"></h:outputStylesheet>

	<h:body>
		<div class="container">
		
        	<div class="row row-centered">
	
		    	<f:event type="preRenderView" listener="#{perfilUsuarioController.init()}"/>
		
			    <h:form class="form-horizontal col-md-6 col-md-offset-3" enctype="multipart/form-data">
			
	<!-- 		        <p:messages id="messages" autoUpdate="true" showDetail="true" closable="true"/> -->
					
					<legend>Modifica tus datos personales</legend>
					
			        <div class="form-group">
			        	<label for="nick" class="col-sm-4 control-label">Nombre de usuario</label>
			        	<div class="col-sm-8">
				        	<p:inputText styleClass="form-control" value="#{perfilUsuarioController.nickPersonal}" id="nick" title="nick" disabled="true">
				                <f:validateLength minimum="3" maximum="65"/>
				                <p:ajax update="nickOK" event="keyup"/>
				            </p:inputText>
				            <p:message id="nickOK" for="nick" display="text"/>
				        </div>
			        </div>
			            
			        <div class="form-group">
			        	<label for="nombre" class="col-sm-4 control-label">Nombre</label>
			        	<div class="col-sm-8">
				        	<p:inputText styleClass="form-control" value="#{perfilUsuarioController.nombrePersonal}" id="nombre" title="nombre">
				                <f:validateLength minimum="3" maximum="45"/>
				                <p:ajax update="nombreOK" event="keyup"/>
				            </p:inputText>
				            <p:message id="nombreOK" for="nombre" display="text"/>
			        	</div>
			        </div>
			        
			        <div class="form-group">
			        	<label for="apellido" class="col-sm-4 control-label">Apellido</label>
			        	<div class="col-sm-8">
			        		<p:inputText styleClass="form-control" value="#{perfilUsuarioController.apellidoPersonal}" id="apellido" title="apellido">
				                <f:validateLength minimum="5" maximum="45"/>
				                <p:ajax update="apellidoOK" event="keyup"/>
			            	</p:inputText>
			            	<p:message id="apellidoOK" for="apellido" display="text"/>
			        	</div>
			        </div>
			
			        <div class="form-group">
			        	<label for="correo" class="col-sm-4 control-label">Correo electrónico</label>
			        	<div class="col-sm-8"> 
				        	<p:inputText styleClass="form-control" value="#{perfilUsuarioController.correoPersonal}" id="correo" title="correo" required="false">
				                <f:validateRegex pattern="^([\da-z_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$"/>
				                <p:ajax id="correoOK" event="keyup"/>
				            </p:inputText>
				            <p:message id="correoOK" for="correo" display="text"/>
			        	</div>
			        </div>
			            
					<div class="form-group">
			        	<label for="grupo" class="col-sm-4 control-label">Nombre del grupo</label>
			        	<div class="col-sm-8"> 
				        	<p:inputText styleClass="form-control" value="#{perfilUsuarioController.grupoPersonal}" id="grupo" title="grupo" required="false">
				                <f:validateLength minimum="2" maximum="35"/>
				                <p:ajax update="grupoOK" event="keyup"/>
				            </p:inputText>
				            <p:message id="grupoOK" for="grupo" display="text"/>
			        	</div>
			        </div>
			
			        <div class="form-group">
			        	<label for="tipoMusica" class="col-sm-4 control-label">Género musical</label>
			        	<div class="col-sm-8">
				        	<p:inputText styleClass="form-control" value="#{perfilUsuarioController.tipoMusicaPersonal}" id="tipoMusica" title="tipoMusica"
				                         required="false">
				                <f:validateLength minimum="3" maximum="20"/>
				                <p:ajax update="tipoOK" event="keyup"/>
				            </p:inputText>
				            <p:message id="tipoOK" for="tipoMusica" display="text"/>
			        	</div>
			        </div>
			        
			        <div class="form-group">
			        	<label for="web" class="col-sm-4 control-label">Página web</label>
			        	<div class="col-sm-8">
				        	<p:inputText styleClass="form-control" value="#{perfilUsuarioController.webPersonal}" id="web" title="web" required="false">
				                <f:validateRegex pattern="^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \?=.-]*)*\/?$"/>
				                <p:ajax update="webOK" for="web" event="keyup"/>
				            </p:inputText>
				            <p:message id="webOK" for="web" display="text"/>
			        	</div>
			        </div>
			        
			        <div class="form-group">
	                    <div class="col-sm-offset-4 col-sm-8">
	                        <h:commandButton value="Cambiar contraseña" id="password"
			                             actionListener="#{perfilUsuarioController.redirectToFormPassword}"
			                             styleClass="btnCambiarPass"/> 
			
					        <h:commandButton styleClass="btnGuardarCambios pull-right" value="Guardar cambios">
					            <f:ajax execute="@all"
					                    listener="#{perfilUsuarioController.modifyProfile(perfilUsuarioController.idPersonal)}"/>
					        </h:commandButton>  
	                    </div>
	                </div>
			        
			    </h:form>
			    
			</div>
		
		</div>
	    
	 	<h:outputScript library="js" name="jquery-1.12.3.min.js"/>
	    <h:outputScript library="js" name="bootstrap.min.js"/>
	</h:body>
</html>